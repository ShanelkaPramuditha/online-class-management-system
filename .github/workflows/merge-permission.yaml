name: Merge Control

on:
   pull_request:
      types: [opened, reopened, synchronize, labeled, unlabeled]

jobs:
   merge-control:
      runs-on: ubuntu-latest

      steps:
         - name: Check Pull Request Author
           run: |
              PR_AUTHOR=$(curl -s -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" "https://api.github.com/repos/${{ github.repository }}/pulls/${{ github.event.number }}" | jq -r '.user.login')
              if [ "$PR_AUTHOR" != "ShanelkaPramuditha" ]; then
                echo "Only allowed_user is allowed to merge pull requests."
                exit 1
              fi
